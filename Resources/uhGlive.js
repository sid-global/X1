$(document).ready(function(){function m(a){var b=WiziCore_AppContext.getInstance().inputParameters(),d=function(a){var c=a[0],a=a[1];b[c]!=void 0?(b[c]instanceof Array||(b[c]=[b[c]]),b[c].push(a)):b[c]=a},e=a[0],c=a[1];if(c==void 0)d([e]);else if(e!=""&&c!="")try{if(e=="inputParams"&&(c=unescape(c),c=JSON.parse(c),typeof c=="string"&&o(c,m)),typeof c=="object")for(var f in c)d([f,c[f]]);else d(a)}catch(g){acDebugger.systemLog("setInputParameters error",g),d([e,c])}}function o(a,b){for(var d=a.split("&"),
e=0,c=d.length;e<c;e++){var f=d[e].split("=");if(b(f)===!0)break}}function t(){var a=null;return a=AC.Core.cookie().cookie("swirlSession")}function p(a){var b=WiziCore_Helper.getPrintData();if(b&&typeof b.instance=="object"&&typeof b.instance!="string")a.instance=b.instance;AC.Advertising.initLive(h,function(){WiziCore_AppContext.getInstance().forms()._populateFormResult(a,u)})}function q(a){function b(b,d,h){if(b.sessionId!=void 0)try{n!=null&&n.stop();var g=f;h==g&&(g=d!=void 0&&d!=""?d:g);a.loadFullForm(b.sessionId,
g,e,function(a){a.error==!1?p(a.object.result):(WiziCore_Helper.enableInterface(),a=AC.Core.lang().tr("live_load_error"),k(AC.Core.lang().tr("live_create_sess"),a,18))},c)}catch(i){acDebugger.systemLog1("onSessionFullLogin :: error",i)}else WiziCore_Helper.enableInterface(),b=AC.Core.lang().tr("live_create_sess_error"),k(AC.Core.lang().tr("live_create_sess"),b,19)}var d=t(),e=l("instanceId"),c=l("roleId"),f=window.WiziFormId?window.WiziFormId:l("formId"),g=WiziCore_AppContext.getInstance(),h=WiziCore_Helper.getPrintData();
$(a).bind(WiziCore_Api_SessionRequester.onLiveLogin,function(a,c,d,e){b(c,d,e)});if(window.formObject)typeof window.formObject.formResult=="string"?(d=window.formObject.formResult,d=WiziCore_AppContext.getInstance().config().localAppsPath()+d+".json",$.ajax({url:d,dataType:"json",success:function(a){window.formObject.formResult=a;g.widgetScripts().getCsses(window.formObject.formResult.widgetCsses);g.widgetScripts().getScripts(window.formObject.formResult.widgetScripts,function(){i({error:!1,object:{result:window.formObject}})},
!1)},error:function(){i({error:!0})}})):(g.widgetScripts().getCsses(window.formObject.formResult.widgetCsses),g.widgetScripts().getScripts(window.formObject.formResult.widgetScripts,function(){i({error:!1,object:{result:window.formObject}})},!1));else{if(h&&typeof h.instanceId=="string")e=h.instanceId;d==void 0||d==null?r(f,e,c):a.loginAndLoadFormWithSession(d,f,e,function(a){a.error?r(f,e,c):i(a)},c)}}function r(a,b,d){j.loginAndLoadForm(null,null,a,b,function(a){i(a)},d)}function i(a){if(a.error){h.empty();
var b=AC.Core.lang().tr("live_create_sess_error");a.object!=void 0&&(b+=a.object.message!=void 0?"<br>\n"+a.object.message:"",b+="<br>\n"+a.status);k(AC.Core.lang().tr("live_create_sess"),b,20)}else a=a.object.result,j.populateLoginResult(a.loginResult),p(a.formResult)}function l(a){for(var b=window.location.search.substring(1).split("&"),d=null,e=0,c=b.length;e<c;e++){var f=b[e].split("=");f[0]==a&&f.length>1&&(d=f[1])}return d}function u(a,b,d,e){if(a)h.empty(),k(AC.Core.lang().tr("live_load_inst"),
b,17);else{window.swirlDebugger!=void 0&&typeof window.swirlDebugger.openMode=="function"&&swirlDebugger.openMode(WiziCore_Api_Debugger.MODE_USER_OPEN);var a={session:j,pageId:l("pageId")},b=new WiziCore_UI_FormRuntime(WiziCore_UI_FormRuntime.LIVE_MODE),c=h.children();WiziCore_Helper.appLoadSplashHide(c);b.show(d,e,h,a);WiziCore_Helper.enableInterface();n=b}}function k(a,b,d){a=WiziCore_Helper.showError(a,b,d);$(a).one(WiziCore_UI_MessageBoxWidget.onDialogClose,function(a,b){switch(b){case WiziCore_UI_MessageBoxWidget.IDOK:setTimeout(function(){},
200)}});WiziCore_Helper.callPrint()}AC.ssjDebug.bindHotkey();WiziCore_OnErrorEvent.initOnError();o(window.location.search.substring(1),m);AC.inputParams&&m(["inputParams",AC.inputParams]);AC.Core.lang(AC.Lng.ENGLISH).lang(SwirlLangObjectEn);var s=WiziCore_AppContext.getInstance(),j=s.getSession();s.widgetScripts().initList();var h=$("#wiziLiveMode");window.PhoneGap?document.addEventListener("deviceready",function(){q(j)},!1):q(j);var n=null});
